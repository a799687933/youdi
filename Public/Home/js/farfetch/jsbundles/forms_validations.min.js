// JavaScript Document
var form_search=$(".form-search"),form_search_input=$(".form-search").find("input"),form_search_clear=$(".input-text-clear");form_search.on("input",function(){var r=!1,a=$(this).find(".input-text-clear");$(this).find("input").each(function(a,e){return e.value?(r=!0,!1):void 0}),r?a.removeClass("hide"):a.addClass("hide")}),form_search_clear.on("click",function(){$(this).addClass("hide").parent().find("input").val("").focus(),$(this).trigger("clearsearch")}),form_search_input.focus(function(){$(this).parent().addClass("form-search_focus")}),form_search_input.focusout(function(){$(this).parent().removeClass("form-search_focus")});
!function(n){var e={listSelector:"ul",menuClass:"menuOpen",scrollSelector:"ul",dragSelector:"",itemsVisible:"7",menuOpen:!1,closeOthers:!1,focused:!1,onItemClick:function(e){if(e.preventDefault(),n(this).attr("href")){var t=n(this).attr("href");""!=t&&-1==t.indexOf("#")&&(window.location=t)}}},t={bindHeader:function(e,t,o,i,s,d){return e.off("mouseup").on("mouseup",function(l){var r=n.data(e,"dropdown-scroll");if(d.menuOpen=!d.menuOpen,e.data("select"));else if(r)n.data(e,"dropdown-scroll",!1);else{if(s){var a=e[0].getElementsByTagName("span")[0];FFAPI.methods.hasClass(a,"menuOpen")||n(".dropdown:not(.dropdown-accordion)").find("span").removeClass("menuOpen").end().find("ul")}t.toggle(),o.toggleClass(i)}}),e.off("mousedown").on("mousedown",function(e){e.preventDefault(),d.focused=!0,n(e.currentTarget).focus()}),e.off("focus").on("focus",function(n){d.focused||(t.toggle(),o.toggleClass(i),d.menuOpen||(d.menuOpen=!0),d.focused=!0)}),e.off("blur").on("blur",function(n){d.menuOpen&&(t.toggle(),o.toggleClass(i),d.menuOpen=!1),d.focused=!1}),this},bindItems:function(e,t,o,i,s){return e.bind("mouseup",function(e){var d=n(this);if(!d.is("[data-filter], [data-dropdown-ignore]")){o.first().text(d.text()),s.val(d.text());var l=n(this).data();return jQInput.data(l),t.hide(),o.removeClass(i),!1}}),this},bindDocument:function(e,t,o,i,s,d){return n(document).click(function(e){n(e.target).closest(".dropdown").length||n(".dropdown:not(.dropdown-accordion)").find("span").removeClass("menuOpen").end().find("ul").hide(),d.focused=!1}),e.data("select")||e.bind("mouseup",function(l){var r=n.data(e,"dropdown-scroll"),a=o.children(":not(.hide)").length,u=o.children().outerHeight()||35,c=u*jQItemsVisible;d.menuOpen&&(d.menuOpen=!1),a>jQItemsVisible?o.css({"overflow-y":"scroll",height:c}):o.css({"overflow-y":"scroll",height:"auto"}),r?n.data(e,"dropdown-scroll",!1):""!=i&&0===n(l.target).closest("#"+i).length&&(t.removeClass(s),o.hide())}),this},onStopScroll:function(e,t){return e.find("ul").bind("scroll",function(){n.data(e,"dropdown-scroll",!0)}),this},bindOnItemClick:function(n,e){n.bind("click",e)},init:function(o){if(this.length){var i={};o&&(i=n.extend(i,e,o));var s=this.find(i.listSelector),d=this.find("span.glyphs"),l=s.find("a");if(id=this[0].id,jQItemsVisible=i.itemsVisible,jQLayer=1001,0==n("#"+id).find("input").length&&n("#"+id).append('<input type="hidden" id="'+id+'Input">'),jQInput=n("#"+id).find("input"),this.css("cursor","pointer"),n(".dropdown").each(function(){n(this).css("z-index",jQLayer),jQLayer-=1}),i.menuOpen===!0?(s.show(),d.addClass(i.menuClass)):s.hide(),t.bindHeader(this,s,d,i.menuClass,i.closeOthers,i),t.bindItems(l,s,d,i.menuClass,jQInput),t.bindDocument(this,d,s,id,i.menuClass,i),i.scrollSelector){var r=this.find(i.scrollSelector);t.onStopScroll(this,r)}i.onItemClick&&"function"==typeof i.onItemClick&&t.bindOnItemClick(l.not("[data-ignore]").not("[data-ajax]"),i.onItemClick)}return this},toggle:function(){settings.menuOpen===!0?(jQList.show(),jQHeader.addClass(settings.menuClass)):(jQList.hide(),jQHeader.removeClass(settings.menuClass))}};n.fn.dropdown=function(e,o){return this.each(function(){return t[e]?o?t[e].apply(n(this),o):t[e]():"object"!=typeof e&&e?void n.error("Method "+e+" does not exist on jQuery.dropDown"):t.init.call(n(this),e)})}}(jQuery),require(["essentials"],function(){$(document).ready(function(n){FFAPI.plugins=FFAPI.plugins||{},FFAPI.plugins.methods=FFAPI.plugins.methods||{},FFAPI.plugins.methods.initJQueryDropdowns=function(e,t){e.find(".dropdown:not(.customdropdown)").dropdown({closeOthers:t}),e.find(".dropdown_open").dropdown({menuOpen:!0}),e.find(".dropdown:not(.dropdown-accordion)").off("click").on("click",function(e){1!=n(e.target).is("a")&&e.stopPropagation()}),e.find(".dropdown span.glyphs").off("click").on("click",function(t){n(this).parent().data("select")&&(e.find(".dropdown span.glyphs").find("ul").first().slideUp(),n(this).parent().find("ul").first().slideToggle(),e.find(".dropdown span.glyphs").removeClass("menuOpen"),n(this).toggleClass("menuOpen"))}),n.each(n('[data-select="multiple"] li'),function(e,t){n(this).on("click",function(e){var t=n(e.target),o=n(this).parent("ul"),i=o.find("input:checked").length;i>0?o.find(".dropdown-clear-all").removeClass("hide"):o.find(".dropdown-clear-all, .listing-filters-clearAll").addClass("hide"),t.is("label")&&t.find("a").trigger("click")})}),n.each(n(".dropdown-clear-all span"),function(e,t){n(this).on("click",function(e){var t=n(this).parent("ul"),o=t.find("input:checked");aux3=n(this).parent(),o.prop("checked",!1),aux3.addClass("hide")})}),e.find(".dropdown-accordion input").on("input",function(e){var t=!1;n(this).closest("form").find("input").each(function(n,e){return e.value?(t=!0,!1):void 0}),t?n(this).closest("ul").find(".dropdown-input-clear").removeClass("hide"):n(this).closest("ul").find(".dropdown-input-clear").addClass("hide")})},FFAPI.plugins.methods.initJQueryDropdowns(n(document),!1)})});
(function(){var t,e,s,i,l,o={}.hasOwnProperty,r=function(t,e){function s(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},e.prototype.add_group=function(t){var e,s,i,l,o,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,r=[],i=0,l=o.length;l>i;i++)s=o[i],r.push(this.add_option(s,e,t.disabled));return r},e.prototype.add_option=function(e,s,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=s&&(this.parsed[s].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected||t(e).hasClass("selected"),disabled:i===!0?i:e.disabled,group_array_index:s,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(t){var e,s;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},e}(),i.select_to_array=function(t){var e,s,l,o,r;for(s=new i,r=t.childNodes,l=0,o=r.length;o>l;l++)e=r[l],s.add_node(e);return s.parsed},e=function(){function e(t,s){this.form_field=t,this.options=null!=s?s:{},this.is_top_style(),e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.is_top_style=function(){var t=this,e=t.form_field.getAttribute("data-top");e&&(t.options.top=e)},e.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.should_close_results=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.farfetch_mode=null!=this.options.farfetch_mode?this.options.farfetch_mode:!1,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.clear_text=this.form_field.getAttribute("data-clear_text")||this.options.clear_text||e.default_clear_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(t){if(this.is_multiple)!this.active_field;else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(t){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(t){var e,s,i,l,o;for(e="",o=this.results_data,i=0,l=o.length;l>i;i++)s=o[i],e+=s.group?this.result_add_group(s):this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s));return e},e.prototype.result_add_option=function(t){var e,s;if(!t.search_match)return"";if(!this.include_option_in_results(t))return"";if(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),FFAPI.methods.hasClass(this.form_field,"changeSizeSelect")){splitted=t.search_text.split(" ");var i="";if(1==splitted.length||2==splitted.length)i=splitted[0];else for(var l=0;l<splitted.length-1;l++)i+=splitted[l]+" ";if(splitted.length>1)var o=splitted[splitted.length-1];else var o="";t.search_text="<span class='bold'>"+i+" </span> "+o}return s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li class="'+e.join(" ")+'"'+s+' data-option-array-index="'+t.array_index+'" value='+t.value+"><i></i>"+t.search_text+"</li>"},e.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&t.active_options>0?'<li class="group-result">'+t.search_text+"</li>":""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var t,e,s,i,l,o,r,n,h,a,c,_,d;for(this.no_results_clear(),l=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),a=new RegExp(t,"i"),d=this.results_data,c=0,_=d.length;_>c;c++)e=d[c],e.search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(o=this.results_data[e.group_array_index],0===o.active_options&&o.search_match&&(l+=1),o.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(l+=1),e.search_match?(r.length&&(n=e.search_text.search(a),h=e.search_text.substr(0,n+r.length)+"</em>"+e.search_text.substr(n+r.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>l&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(t,e){var s,i,l,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(l=0,o=i.length;o>l;l++)if(s=i[l],e.test(s))return!0},e.prototype.choices_count=function(){var t,e,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,s=i.length;s>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),e&&t(e.target).hasClass("chosen-clear-field_link")?void this.container.find(".search-choice-close").trigger("click.chosen"):this.results_showing||this.is_disabled?void(this.farfetch_mode&&this.should_close_results&&(this.should_close_results=!1,this.results_hide())):this.results_show()},e.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:!t.empty},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent)},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e.default_clear_text="Clear",e}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(e){var l,o;l=t(this),o=l.data("chosen"),"destroy"===i&&o?o.destroy():o||l.data("chosen",new s(this,i))}):this}}),s=function(e){function s(){return l=s.__super__.constructor.apply(this,arguments)}return r(s,e),s.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var e,s;if(e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple){var i='<ul class="chosen-choices"><li class="search-field"></li><li><a class="chosen-default" tabindex="-1"><span class="multiselect-itemscheckbox">'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a></li>';this.farfetch_mode&&(i+='<li class="chosen-clear-field" style="display: none;"><a href="#" class="chosen-clear-field_link">'+this.clear_text+"</a></li>"),i+='</ul><div class="chosen-drop"><div class="search-field"><div class="input-icon input-icon-white input-icon-offset"><input type="text" value="'+this.default_text+'" class="input_black" autocomplete="off" style="width:25px;" /><span class="glyphs h3 icon-search input-icon-left"></span></div></div><ul class="chosen-results"></ul></div>',this.container.html(i)}else"true"==this.options.top?this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a><div class="chosen-drop chosen-top"><ul class="chosen-results"></ul><div class="chosen-search"><div class="input-icon input-icon-white input-icon-offset"><input type="text" autocomplete="off" class="input_black"/><span class="glyphs h3 icon-search input-icon-left"></span></div></div></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a><div class="chosen-drop"><div class="chosen-search"><div class="input-icon input-icon-white input-icon-offset"><input type="text" autocomplete="off" class="input_black"/><span class="glyphs h3 icon-search input-icon-left"></span></div></div><ul class="chosen-results"></ul></div>');return this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},s.prototype.destroy=function(){return t(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(e){if(!this.is_disabled){if(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&this.farfetch_mode&&t(e.target).hasClass("result-selected")){var s=t(e.target).attr("data-option-array-index");this.container.find(".search-choice-close[data-option-array-index="+s+"]").trigger("click.chosen"),this.results_hide()}if(null==e||!t(e.target).hasClass("search-choice-close")){if(this.active_field?this.results_showing&&this.farfetch_mode?this.should_close_results=!0:this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).bind("click.chosen",this.click_test_action),this.results_show()),t(e.target).parents(".chosen-single").length&&"checkoutBasket"==t("body").data("page")&&this.container[0].id){var i=this.container[0].id;t("#"+i+" .chosen-drop .chosen-results").scrollTop(0)}return this.activate_field()}}},s.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},s.prototype.search_results_mousewheel=function(t){var e,s,i;return e=-(null!=(s=t.originalEvent)?s.wheelDelta:void 0)||(null!=(i=t.originialEvent)?i.detail:void 0),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(t){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return t(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(e){return this.container.is(t(e.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(t){var e,s,i,l,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),l=i+o,s=this.result_highlight.position().top+this.search_results.scrollTop(),e=s+this.result_highlight.outerHeight(),e>=l)return this.search_results.scrollTop(e-i>0?e-i:0);if(o>s)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),"true"==this.options.top&&this.container.addClass("chosen-with-drop-top"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},s.prototype.update_results_content=function(t){return this.search_results.html(t)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),"true"==this.options.top&&this.container.removeClass("chosen-with-drop-top"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(t){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},s.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(e),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},s.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(e){var s,i,l=this;return s=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return l.choice_destroy_link_click(t)}),s.append(i)),this.container.find("li.chosen-clear-field").show(),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(e){e.preventDefault(),e.stopPropagation();var s;return this.is_disabled||(s=this.choice_destroy(t(e.target))),0==this.container.find("li.search-choice").length&&this.container.find("li.chosen-clear-field").hide(),s},s.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(e){var s=e.target,i=null,l=null,o=1;if(t(s).parents(".WishListChangeSizeDiv ").length>0&&(t(s).parent(".active-result").length?(i=t(s).parent(".active-result").val(),l=t(s).parents(".WishListChangeSizeDiv ").find("select").val(),l==i&&(o=null)):t(s).hasClass("active-result")&&(i=t(s).val(),l=t(s).parents(".WishListChangeSizeDiv ").find("select").val(),l==i&&(o=null))),o){var r,n,h;if(this.result_highlight){if(r=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;if(this.is_multiple?r.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),h=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[h].selected=!1),this.result_single_selected=r),r.addClass("result-selected"),n=this.results_data[r[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value});var a=t(this.form_field_jq.closest("form"));if(a){var c=a.validate();if(void 0!=c){c.element(this.form_field);var _=this.form_field.getAttribute("data-dropdownValidate");if(void 0!=_){var d=document.getElementById(_);null!=d&&c.element(d)}}}}return this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()}}this.results_hide()},s.prototype.single_set_selected_text=function(t){var e=this.default_text,s=this.selected_item;return t&&(e=t.text),null==e&&(e=this.default_text),e===this.default_text?s.addClass("chosen-default"):(this.single_deselect_control_build(),s.removeClass("chosen-default")),s.find("span").removeClass(),t&&t.classes&&s.find("span").addClass(t.classes),FFAPI.methods.hasClass(this.form_field,"changeSizeSelect")&&""==this.form_field.value&&(e=this.default_text),s.find("span").html(e)},s.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},s.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var e,s;return s=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=s.length?s.first():this.search_results.find(".active-result").first(),"true"==this.options.top&&t(".chosen-top",this.container).css("top",-t(".chosen-drop",this.container).outerHeight(!0)),null!=e?this.result_do_highlight(e):void 0},s.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s),"true"==this.options.top&&t(".chosen-top",this.container).css("top",-t(".chosen-drop",this.container).outerHeight(!0)),this.search_results},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var e,s,i,l,o,r,n,h,a;if(this.is_multiple){for(i=0,n=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],h=0,a=r.length;a>h;h++)l=r[h],o+=l+":"+this.search_field.css(l)+";";return e=t("<div />",{style:o}),e.text(this.search_field.val()),t("body").append(e),n=e.width()+25,e.remove(),s=this.container.outerWidth(),n>s-10&&(n=s-10),this.search_field.css({width:n+"px"})}},s}(e)}).call(this);
!function(t){"use strict";function e(e,s){var i=this,l=e.width();this.$el=e.hide(),this.options=s,this.$parent=t('<div class="ms-parent"></div>'),this.$drop=t('<div class="ms-drop '+s.position+'"></div>'),this.copyAttributes=!1,e.data("copyAttributes")===!0&&(this.copyAttributes=!0,this.$parent.data(this.$el.data())),this.$el.after(this.$parent),this.$parent.append(this.$drop),s.placeholder!==!1&&(this.$choice=t('<button type="button" class="ms-choice"><span class="placeholder">'+s.placeholder+"</span><div></div></button>"),this.$parent.append(this.$choice),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$choice.css("width",l+"px")),this.$drop.css({width:(s.width||l)+"px"}),this.options.isopen&&(this.$choice&&this.$choice.find(">div").addClass("open"),this.$parent.addClass("ms-parent-open"),this.$drop.addClass("ms-drop-open").slideDown(),this.options.focusInput&&setTimeout(function(){i.options.onOpen(),t(".ms-search .input_black").focus()},400))}e.prototype={constructor:e,init:function(){var e=this,s=[];if(this.options.showClearAll&&s.push('<div class="ms-clear hide"><span>'+this.options.clearAllText+"</span></div>"),this.options.single&&this.$parent.addClass("ms-parent-single"),this.options.filter){var i=this.options.placeholderText,l=this.options.noresultsText;i||(i="Type your search here"),l||(l="No results found"),s.push('<div class="ms-search input-icon input-icon-black input-icon-offset">','<input type="text" class="input_black" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false" placeholder="'+i+'">','<span class="glyphs input-icon-right icon-close ms-drop-text-clear js-input-text-clear hide"></span><span class="glyphs input-icon-left icon-search h3"></span>'),s.push("</div>"),this.options.showNoResults&&s.push('<div class="ms-no-results hide">'+l+"</div>"),s.push("</div>")}s.push("<ul>"),this.options.selectAll&&!this.options.single&&s.push("<li>",'<input type="checkbox" name="selectAll" /> ','<label class="ffInput" >','<span class="ffInput__checkbox ffInput--white"></span>',"["+this.options.selectAllText+"]","</label>","</li>"),t.each(this.$el.children(),function(t,i){s.push(e.optionToHtml(t,i))}),s.push("</ul>"),this.$drop.html(s.join("")),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find("ul").attr("id",this.$el.attr("data-ul-id")),this.$drop.find("ul").addClass(this.$el.attr("data-ul-class")),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find('input[name="selectAll"]'),this.$selectGroups=this.$drop.find('input[name="selectGroup"]'),this.$selectItems=this.$drop.find('input[name="selectItem"]:enabled'),this.$disableItems=this.$drop.find('input[name="selectItem"]:disabled'),this.$clearAll=this.$drop.find("div.ms-clear"),this.$clearAll.attr("id",this.$el.attr("data-clear-id")),this.$clearAll.addClass(this.$el.attr("data-clear-class")),this.$clearAllSpan=this.$clearAll.find("span"),this.$clearAllSpan.attr("id",this.$el.attr("data-clear-span-id")),this.$clearAllSpan.addClass(this.$el.attr("data-clear-span-class")),this.$clearAllSpan.attr("data-filter",this.$el.attr("data-clear-filter")),this.$noResults=this.$drop.find(".ms-no-results"),this.$clearInputVal=this.$drop.find(".ms-drop-text-clear"),this.events(),this.update()},moveAttribute:function(t,e,s,i){var l=t.attr(s);return void 0==i&&(i=s),void 0==l?void 0:(e.attr(i,l),void t.removeAttr(s))},optionToHtml:function(e,s,i,l){var o,n=this,a=t(s),c=[],h=this.options.multiple,p=this.options.single?"radio":"checkbox";if(a.is("option")&&void 0===a.attr("data-loaded")){var r=a.val(),d=a.text(),u=a.prop("selected");if(o=l||a.prop("disabled"),this.copyAttributes){var f=t("<li"+(h?' class="multiple"':"")+"></li>"),$=null;$=t(a.data("nochkbox")?"<span>"+d+"</span>":'<label class="ffInput'+(o?" disabled":"")+'" for="selectItem-'+a.attr("id")+'"><span class="ffInput__checkbox ffInput--white"></span>'+d+"</label>");var m=t("<a"+(i?' data-group="'+i+'"':"")+(a.data("nochkbox")&&o?' class="disabled"':"")+"></a>"),v=t('<input type="'+p+'" name="selectItem" id="selectItem-'+a.attr("id")+'" value="'+r+'"'+(u?' checked="checked"':"")+(o?' disabled="disabled"':"")+(i?' data-group="'+i+'"':"")+"/> ");f.addClass(a.attr("data-li-class")),n.moveAttribute(a,m,"id"),n.moveAttribute(a,m,"class"),n.moveAttribute(a,m,"data-ignore"),n.moveAttribute(a,m,"data-filter"),n.moveAttribute(a,m,"data-filter-relative-deep"),n.moveAttribute(a,m,"data-parent-filter"),n.moveAttribute(a,m,"data-parent-top-filter"),n.moveAttribute(a,m,"order"),n.moveAttribute(a,m,"trk"),n.moveAttribute(a,m,"href"),n.moveAttribute(a,m,"rel"),a.attr("data-loaded",!0),m.append(v),m.append($),f.append(m),c.push(f[0].outerHTML)}else c.push("<li"+(h?' class="multiple"':"")+">",'<input type="'+p+'" name="selectItem" value="'+r+'"'+(u?' checked="checked"':"")+(o?' disabled="disabled"':"")+(i?' data-group="'+i+'"':"")+"/> ",'<label class="ffInput" for="selectItem">','<span class="ffInput__checkbox ffInput--white"></span>',d,"</label>","</li>")}else if(!i&&a.is("optgroup")){var b="group_"+e,$=a.attr("label");o=a.prop("disabled"),c.push('<li class="group">','<input type="checkbox" name="selectGroup"'+(o?' disabled="disabled"':"")+" /> ",'<label class="optgroup'+(o?" disabled":"")+'" data-group="'+b+'">','<span class="ffInput__checkbox ffInput--white"></span>',$,"</label>","</li>"),t.each(a.children(),function(t,e){c.push(n.optionToHtml(t,e,b,o))})}return c.join("")},events:function(){var e=this;this.$choice&&this.$choice.off("click").on("click",function(){e[e.options.isopen?"close":"open"]()}),this.$parent.off("keydown").on("keydown",function(t){switch(t.which){case 27:e.close(),e.$choice&&e.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(t){switch(t.which){case FFAPI.keycode.enter:return!1}}),this.$searchInput.off("keyup").on("keyup",function(t){e.filter()}),this.$selectAll.off("click").on("click",function(){var s=t(this).prop("checked"),i=e.$selectItems.filter(":visible");i.length===e.$selectItems.length?e[s?"checkAll":"uncheckAll"]():(e.$selectGroups.prop("checked",s),i.prop("checked",s),e.update())}),this.$clearAll.off("click").on("click",function(){e.uncheckAll()}),this.$selectGroups.off("click").on("click",function(){var s=t(this).parent().attr("data-group"),i=e.$selectItems.filter(":visible"),l=i.filter('[data-group="'+s+'"]'),o=l.length!==l.filter(":checked").length;l.prop("checked",o),e.updateSelectAll(),e.update(),e.options.onOptgroupClick({label:t(this).parent().text(),checked:o,children:l.get()})}),this.$selectItems.off("click").on("click",function(){e.updateSelectAll(),e.update(),e.updateOptGroupSelect(),e.options.onClick({label:t(this).parent().text(),value:t(this).val(),checked:t(this).prop("checked"),li:t(this).closest("li").toggleClass("ms-drop-selected")})}),this.$clearInputVal.off("click").on("click",function(){t(this).parent().find("input").val("").focus(),t(this).parent().find(".js-input-text-clear").addClass("hide"),t(this).parent().parent().find(".ms-no-results").hide(),t(this).parent().parent().find("ul").removeClass("ms-list-no-results"),t(this).parent().parent().find("ul li").show()})},open:function(){if(!this.$choice||!this.$choice.hasClass("disabled")){if(this.options.isopen=!0,this.$choice.find(">div").addClass("open"),this.$parent.addClass("ms-parent-open"),this.$drop.addClass("ms-drop-open").slideDown(),this.options.container){var e=this.$drop.offset();this.$drop.appendTo(t(this.options.container)),this.$drop.offset({top:e.top,left:e.left})}this.options.filter&&(this.$searchInput.val(""),this.filter()),this.options.onOpen()}},close:function(){this.options.isopen=!1,this.$choice&&this.$choice.find(">div").removeClass("open"),this.$parent.removeClass("ms-parent-open"),this.$drop.removeClass("ms-drop-open").slideUp(),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose(),this.$searchInput.blur()},update:function(){var t=this.getSelects("text");if(this.$choice&&t.length==this.$selectItems.length&&this.options.overrideButtonText){var e=this.$choice.find(">span");e.removeClass("placeholder").html(this.options.selectAllText)}else t.length?this.$clearAll.removeClass("hide").addClass("show"):this.$clearAll.addClass("hide").removeClass("show");this.$el.val(this.getSelects())},updateSelectAll:function(){var t=this.$selectItems.filter(":visible");this.$selectAll.prop("checked",t.length&&t.length===t.filter(":checked").length)},updateOptGroupSelect:function(){var e=this.$selectItems.filter(":visible");t.each(this.$selectGroups,function(s,i){var l=t(i).parent().attr("data-group"),o=e.filter('[data-group="'+l+'"]');t(i).prop("checked",o.length&&o.length===o.filter(":checked").length)})},getSelects:function(e){var s=this,i=[],l=[];return this.$drop.find('input[name="selectItem"]:checked').each(function(){i.push(t(this).parent().text()),l.push(t(this).val())}),"text"===e&&this.$selectGroups.length&&(i=[],this.$selectGroups.each(function(){var e=[],l=t.trim(t(this).parent().text()),o=t(this).parent().data("group"),n=s.$drop.find('[name="selectItem"][data-group="'+o+'"]'),a=n.filter(":checked");if(0!==a.length){if(e.push("["),e.push(l),n.length>a.length){var c=[];a.each(function(){c.push(t(this).parent().text())}),e.push(": "+c.join(", "))}e.push("]"),i.push(e.join(""))}})),"text"===e?i:l},setSelects:function(e){var s=this;this.$selectItems.prop("checked",!1),t.each(e,function(t,e){s.$selectItems.filter('[value="'+e+'"]').prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length),this.update()},enable:function(){this.$choice&&this.$choice.removeClass("disabled")},disable:function(){this.$choice&&this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectItems.closest("li").removeClass("ms-drop-selected"),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},refresh:function(){this.init()},filterUpdate:function(){for(var e=this.$el.children(),s=e.length,i=0;s-1>=i;i++){var l=e[i];void 0===t(l).attr("data-loaded")&&this.$drop.children("ul").append(this.optionToHtml(i,l))}this.$selectItems=this.$drop.find('input[name="selectItem"]:enabled'),this.setItemsGroupsVisibility()},refilter:function(){for(var e=0;e<=this.$el.children().length-1;e++){var s=this.$el.children()[e];void 0===t(s).attr("data-loaded")&&this.$drop.children("ul").append(this.optionToHtml(e,s))}this.$selectItems=this.$drop.find('input[name="selectItem"]:enabled'),this.filter(),this.events()},filter:function(){this.setItemsGroupsVisibility(),this.$selectItems.parent().parent().filter(":visible").length?(this.$noResults.hide(),this.$drop.find("ul").removeClass("ms-list-no-results")):(this.$noResults.show(),this.$drop.find("ul").addClass("ms-list-no-results")),this.options.onSearch(),this.updateOptGroupSelect(),this.updateSelectAll()},setItemsGroupsVisibility:function(){var e=this,s=t.trim(this.$searchInput.val()).toLowerCase();0===s.length?(this.$selectItems.closest("li").show(),this.$disableItems.closest("li").show(),this.$selectGroups.parent().show(),this.$searchInput.parent().find(".ms-drop-text-clear").addClass("hide")):(this.$searchInput.parent().find(".ms-drop-text-clear").removeClass("hide"),this.$selectItems.each(function(){var e=t(this).parent();e.closest("li")[e.text().toLowerCase().indexOf(s)<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var s=t(this).parent(),i=s.attr("data-group"),l=e.$selectItems.filter(":visible");s.parent()[0===l.filter('[data-group="'+i+'"]').length?"hide":"show"]()}))}},t.fn.multipleSelect=function(){var s,i=arguments[0],l=arguments,o=["getSelects","setSelects","enable","disable","checkAll","uncheckAll","refresh","refilter","filterUpdate"];return this.each(function(){var n=t(this),a=n.data("multipleSelect"),c=t.extend({},t.fn.multipleSelect.defaults,"object"==typeof i&&i);if(a||(a=new e(n,c),n.data("multipleSelect",a)),"string"==typeof i){if(t.inArray(i,o)<0)throw"Unknown method: "+i;s=a[i](l[1])}else a.init()}),s?s:this},t.fn.multipleSelect.defaults={isopen:!1,placeholder:"",selectAll:!0,selectAllText:"Select all",multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,maxHeight:250,container:null,position:"bottom",clearAllText:"Clear",showClearAll:!0,focusInput:!0,showNoResults:!0,onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onSearch:function(){return!1}}}(jQuery);
!function(e){var c={init:function(e){var a=e,i=a.find("input").first(),t=i.attr("trk");if(!(a.find("span").length>0)){var n=i.prop("checked"),l=i.prop("disabled"),d=i.is(":checkbox");i.after("<span></span>");var o=a.find("span");d===!0?(n===!0?(o.addClass("glyphs icon-box-checked"),e.addClass("label-check_active")):(o.addClass("icon-box-unchecked"),e.removeClass("label-check_active")),0==l&&c.clickCheck(a,o)):(n===!0?e.addClass("label-check_active"):e.removeClass("label-check_active"),0==l&&c.clickOption(a,o)),t&&o.attr("trk",t),a.attr("started",!0)}},clickCheck:function(e,c){e.bind("click",function(a){var i=e.find("input"),t=i.prop("checked");e.hasClass("label-check-disabled")||(t===!0?(c.addClass("icon-box-unchecked"),c.removeClass("glyphs icon-box-checked"),e.removeClass("label-check_active"),i.prop("checked",!1),i.attr("checked",!1)):(c.addClass("glyphs icon-box-checked"),e.addClass("label-check_active"),c.removeClass("icon-box-unchecked"),i.prop("checked",!0),i.attr("checked",!0))),a.preventDefault()})},clickOption:function(c,a){c.bind("click",function(a){var i=c.find("input"),t=i.is(":checked");i.is(":disabled")||($elemGroup=e("body").find(':radio[name="'+i.attr("name")+'"]'),$elemGroup.not(i).each(function(){var c=e(this);c.parent("label");c.prop("checked",!1),c.attr("checked",!1)}),t!==!0&&(i.prop("checked",!0),i.attr("checked",!0)),a.preventDefault())})},activateCheckbox:function(e,a){e.removeClass("label-check-disabled"),e.unbind("click"),c.clickCheck(e,a)},activateRadio:function(e,a){e.removeClass("label-radio-disabled"),e.unbind("click"),c.clickOption(e,a)}};e.fn.checkradio=function(a){var i=e.extend({text:"",complete:function(){}},a);return this.each(function(){"true"!==e(this).attr("started")&&c.init(e(this)),e.isFunction(i.complete)&&i.complete.call(this)})}}(jQuery);
!function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var r=t.data(s.form,"validator").settings,n=r.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=t.extend(r.messages[s.name],i.messages));break;case"remove":if(!i)return delete n[s.name],a;var o={};return t.each(i.split(/\s/),function(t,e){o[e]=a[e],delete a[e]}),o}}var u=t.validator.normalizeRules(t.extend({},t.validator.classRules(s),t.validator.attributeRules(s),t.validator.dataRules(s),t.validator.staticRules(s)),s);if(u.required){var l=u.required;delete u.required,u=t.extend({required:l},u)}return u}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"span",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t,e){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t,e){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t,e){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:FFAPI.translations.requiredErrorMsg,remote:FFAPI.translations.remoteErrorMsg,email:FFAPI.translations.emailErrorMsg,url:FFAPI.translations.urlErrorMsg,date:FFAPI.translations.dateErrorMsg,dateISO:FFAPI.translations.dateISOErrorMsg,number:FFAPI.translations.numberErrorMsg,digits:FFAPI.translations.digitsErrorMsg,creditcard:FFAPI.translations.creditcardErrorMsg,equalTo:FFAPI.translations.equalToErrorMsg,maxlength:t.validator.format(FFAPI.translations.numCharactersErrorMsg),minlength:t.validator.format(FFAPI.translations.minlengthErrorMsg),rangelength:t.validator.format(FFAPI.translations.rangelengthErrorMsg),range:t.validator.format(FFAPI.translations.rangeErrorMsg),max:t.validator.format(FFAPI.translations.maxErrorMsg),min:t.validator.format(FFAPI.translations.minErrorMsg)},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){"string"==typeof s&&(s=s.split(/\s/)),t.each(s,function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),s=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s=t(e).rules(),r=!1,n=this.elementValue(e);for(var a in s){var o={method:a,parameters:s[a]};try{if(i=t.validator.methods[a].call(this,n,e,o.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(u){throw this.settings.debug&&window.console,u}}return r?void 0:(this.objectLength(s)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t,e){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e),r=s[0].getAttribute("type");for(var n in t.validator.methods){var a;"required"===n?(a=s.get(0).getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(a=Number(a)),a?i[n]=a:r===n&&"range"!==r&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule-"+i.toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return void delete e[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1;t=t.replace(/\D/g,"");for(var n=t.length-1;n>=0;n--){var a=t.charAt(n);s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r}return i%10===0},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===e)return r.valid;r.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){n.settings.messages[i.name].remote=r.originalMessage;var a=s===!0||"true"===s;if(a){var o=n.formSubmitted;n.prepareElement(i),n.formSubmitted=o,n.successList.push(i),delete n.invalid[i.name],n.showErrors()}else{var u={},l=s||n.defaultMessage(i,"remote");u[i.name]=r.message=t.isFunction(l)?l(e):l,n.invalid[i.name]=!0,n.showErrors(u)}r.valid=a,n.stopRequest(i,a)}},s)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,s){var r=t.port;"abort"===t.mode&&(e[r]&&e[r].abort(),e[r]=s)});else{var i=t.ajax;t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments),e[n]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})}(jQuery);
!function(t){function a(t,a){for(var e=window,n=(t||"").split(".");e&&n.length;)e=e[n.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function e(t){return"GET"===t||"POST"===t}function n(t,a){e(a)||t.setRequestHeader("X-HTTP-Method-Override",a)}function r(a,e,n){var r;-1===n.indexOf("application/x-javascript")&&(r=(a.getAttribute("data-ajax-mode")||"").toUpperCase(),t(a.getAttribute("data-ajax-update")).each(function(a,n){var i;switch(r){case"BEFORE":i=n.firstChild,t("<div />").html(e).contents().each(function(){n.insertBefore(this,i)});break;case"AFTER":t("<div />").html(e).contents().each(function(){n.appendChild(this)});break;default:t(n).html(e)}}))}function i(i,u){var o,d,s,c;if(o=i.getAttribute("data-ajax-confirm"),!o||window.confirm(o)){d=t(i.getAttribute("data-ajax-loading")),c=parseInt(i.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(u,{context:i,type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,beforeSend:function(t){var e;return n(t,s),e=a(i.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),e!==!1&&d.show(c),e},complete:function(){d.hide(c),a(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(t,e,n){r(i,t,n.getResponseHeader("Content-Type")||"text/html"),a(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:a(i.getAttribute("data-ajax-failure"),["xhr","status","error"])});var l=i.getAttribute("data-with-credentials");null==l||"true"!=l.toLowerCase()&&1!=l||t.extend(u,{xhrFields:{withCredentials:!0}}),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),s=u.type.toUpperCase(),e(s)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:s})),t.ajax(u)}}function u(a){var e=t(a).data(data_validation);return!e||!e.validate||e.validate()}var o="unobtrusiveAjaxClick",d="unobtrusiveAjaxClickTarget";data_validation="unobtrusiveValidation",t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(a){var e=a.target.name,n=t(a.target),r=t(n.parents("form")[0]),i=n.offset();r.data(o,[{name:e+".x",value:Math.round(a.pageX-i.left)},{name:e+".y",value:Math.round(a.pageY-i.top)}]),setTimeout(function(){r.removeData(o)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(a){var e=a.currentTarget.name,n=t(a.target),r=t(n.parents("form")[0]);r.data(o,e?[{name:e,value:a.currentTarget.value}]:[]),r.data(d,n),setTimeout(function(){r.removeData(o),r.removeData(d)},0)}),t(document).on("submit","form[data-ajax=true]",function(a){var e=t(this).data(o)||[],n=t(this).data(d),r=n&&n.hasClass("cancel");a.preventDefault(),(r||u(this))&&i(this,{url:this.action,type:this.method||"GET",data:e.concat(t(this).serializeArray())})})}(jQuery);
!function(a){function e(a,e,n){a.rules[e]=n,a.message&&(a.messages[e]=a.message)}function n(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function t(a){return a.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function i(a){return a.substr(0,a.lastIndexOf(".")+1)}function r(a,e){return 0===a.indexOf("*.")&&(a=a.replace("*.",e)),a}function d(e,n){var i=a(this).find("[data-valmsg-for='"+t(n[0].name)+"']"),r=i.attr("data-valmsg-replace"),d=r?a.parseJSON(r)!==!1:null;i.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",i),d?(i.empty(),e.removeClass("input-validation-error").appendTo(i)):e.hide()}function o(e,n){var t=a(this).find("[data-valmsg-summary=true]"),i=t.find("ul");i&&i.length&&n.errorList.length&&(i.empty(),t.addClass("validation-summary-errors").removeClass("validation-summary-valid"),a.each(n.errorList,function(){a("<li />").html(this.message).appendTo(i)}))}function s(e){var n=e.data("unobtrusiveContainer"),t=n.attr("data-valmsg-replace"),i=t?a.parseJSON(t):null;n&&(n.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),i&&n.empty())}function l(e){var n=a(this);n.data("validator").resetForm(),n.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function m(e,n,t){if(a.validator.defaults[e].call(this,n,t),this.invalid[n.name]){var i=document.createEvent("CustomEvent");i.initCustomEvent("invalid-element.validate",!0,!0,this),n.dispatchEvent(i)}}function u(e){var n=a(e),t=n.data(f),i=a.proxy(l,e),r={cardNumber:"Detail.CreditCardDetails.NewCreditCardDetails.Number",cardCVV:"Detail.CreditCardDetails.NewCreditCardDetails.CCV"};return t||(t={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:a.proxy(d,e),invalidHandler:a.proxy(o,e),messages:{},rules:{},success:a.proxy(s,e),onfocusout:function(a,e){m.call(this,"onfocusout",a,e)},onkeyup:function(a,e){return a.name===r.cardNumber||a.name===r.cardCVV?!1:void m.call(this,"onkeyup",a,e)}},attachValidation:function(){n.unbind("reset."+f,i).bind("reset."+f,i).validate(this.options)},validate:function(){return n.validate(),n.valid()}},n.data(f,t)),t}var p,v=a.validator,f="unobtrusiveValidation";v.unobtrusive={adapters:[],parseElement:function(e,n){var t,i,r,d=a(e),o=d.parents("form")[0];o&&(t=u(o),t.options.rules[e.name]=i={},t.options.messages[e.name]=r={},a.each(this.adapters,function(){var n="data-val-"+this.name,t=d.attr(n),s={};void 0!==t&&(n+="-",a.each(this.params,function(){s[this]=d.attr(n+this)}),this.adapt({element:e,form:o,message:t,params:s,rules:i,messages:r}))}),a.extend(i,{__dummy__:!0}),n||t.attachValidation())},parse:function(e){var n=a(e).parents("form").andSelf().add(a(e).find("form")).filter("form");a(e).find(":input").filter("[data-val=true]").each(function(){v.unobtrusive.parseElement(this,!0)}),n.each(function(){var a=u(this);a&&a.attachValidation()})}},p=v.unobtrusive.adapters,p.add=function(a,e,n){return n||(n=e,e=[]),this.push({name:a,params:e,adapt:n}),this},p.addBool=function(a,n){return this.add(a,function(t){e(t,n||a,!0)})},p.addMinMax=function(a,n,t,i,r,d){return this.add(a,[r||"min",d||"max"],function(a){var r=a.params.min,d=a.params.max;r&&d?e(a,i,[r,d]):r?e(a,n,r):d&&e(a,t,d)})},p.addSingleVal=function(a,n,t){return this.add(a,[n||"val"],function(i){e(i,t||a,i.params[n])})},v.addMethod("__dummy__",function(a,e,n){return!0}),v.addMethod("regex",function(a,e,n){var t;return this.optional(e)?!0:(t=new RegExp(n).exec(a),t&&0===t.index&&t[0].length===a.length)}),v.addMethod("nonalphamin",function(a,e,n){var t;return n&&(t=a.match(/\W/g),t=t&&t.length>=n),t}),v.methods.extension?(p.addSingleVal("accept","mimtype"),p.addSingleVal("extension","extension")):p.addSingleVal("extension","extension","accept"),p.addSingleVal("regex","pattern"),p.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),p.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),p.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),p.add("equalto",["other"],function(n){var d=i(n.element.name),o=n.params.other,s=r(o,d),l=a(n.form).find(":input").filter("[name='"+t(s)+"']")[0];e(n,"equalTo",l)}),p.add("required",function(a){"INPUT"===a.element.tagName.toUpperCase()&&"CHECKBOX"===a.element.type.toUpperCase()||e(a,"required",!0)}),p.add("remote",["url","type","additionalfields"],function(d){var o={url:d.params.url,type:d.params.type||"GET",data:{}},s=i(d.element.name);a.each(n(d.params.additionalfields||d.element.name),function(e,n){var i=r(n,s);o.data[i]=function(){return a(d.form).find(":input").filter("[name='"+t(i)+"']").val()}}),e(d,"remote",o)}),p.add("password",["min","nonalphamin","regex"],function(a){a.params.min&&e(a,"minlength",a.params.min),a.params.nonalphamin&&e(a,"nonalphamin",a.params.nonalphamin),a.params.regex&&e(a,"regex",a.params.regex)})}(jQuery);
if($.validator){$.validator.addMethod("filesize",function(e,a,r){return a.files.length<1?!0:a.files&&a.files[0].size?a.files[0].size<r.maxsize:!0}),$.validator.unobtrusive.adapters.add("filesize",["maxsize"],function(e){e.rules.filesize=e.params,e.message&&(e.messages.filesize=e.message)}),$.validator.addMethod("accept",function(e,a,r){if(a.files.length<1)return!0;if(!a.files||!a.files[0].size)return!0;var t=r.exts.split(","),s=a.files[0].name.toLowerCase(),n=s.substr(s.lastIndexOf(".")+1);return!(-1==$.inArray(n,t))}),$.validator.unobtrusive.adapters.add("accept",["exts"],function(e){e.rules.accept=e.params,e.message&&(e.messages.accept=e.message)}),$.validator.addMethod("validfullname",function(e,a,r){var t=e,s=t.match(/\b[^\s]+\b/g);return s&&s.length>=2}),$.validator.unobtrusive.adapters.add("validfullname",[""],function(e){e.messages.validfullname=e.message,e.rules.validfullname=!0}),$.validator.addMethod("validcpf",function(e,a,r){var t=e.replace(/\.|-/gi,"");if(""==t)return!1;if(11!=t.length||"00000000000"==t||"11111111111"==t||"22222222222"==t||"33333333333"==t||"44444444444"==t||"55555555555"==t||"66666666666"==t||"77777777777"==t||"88888888888"==t||"99999999999"==t)return!1;for(var s=0,n=0;9>n;n++)s+=parseInt(t.charAt(n))*(10-n);var d=11-s%11;if(10!=d&&11!=d||(d=0),d!=parseInt(t.charAt(9)))return!1;for(s=0,n=0;10>n;n++)s+=parseInt(t.charAt(n))*(11-n);return d=11-s%11,10!=d&&11!=d||(d=0),d==parseInt(t.charAt(10))}),$.validator.unobtrusive.adapters.add("validcpf",[""],function(e){e.messages.validcpf=e.message,e.rules.validcpf=!0}),$.validator.addMethod("creditcardmonth",function(e,a,r){var t=void 0;try{var s=a.name.split(".");s=s[s.length-1];var n=a.name.replace(s,r);t=parseInt($('[name="'+n+'"]').val())}catch(d){}void 0==t&&(t=parseInt($("#"+r).val()));var o=parseInt(e);return isNaN(t)||isNaN(o)?!0:new Date(t,o,0)>=new Date}),$.validator.unobtrusive.adapters.add("creditcardmonth",["yearpropertyname"],function(e){e.rules.creditcardmonth=e.params.yearpropertyname,e.messages.creditcardmonth=e.message}),$.validator.addMethod("numericlessthan",function(e,a,r){var t=$(r.element).val();return isNaN(e)&&isNaN(t)||("True"===r.allowequality?parseFloat(e)<=parseFloat(t):parseFloat(e)<parseFloat(t))},""),$.validator.unobtrusive.adapters.add("numericlessthan",["other","allowequality"],function(e){other=e.params.other,element=$(e.form).find(":input[name="+other+"]")[0],e.rules.numericlessthan={allowequality:e.params.allowequality,element:element},e.message&&(e.messages.numericlessthan=e.message)});var nonRomanCharsRegex=/[^\u0020-\u007E\u000A\u000D\u00AA\u00BA\u00C0-\u00FF]/;$.validator.addMethod("nonromancharacters",function(e,a,r){return!nonRomanCharsRegex.test(e)}),$.validator.unobtrusive.adapters.add("nonromancharacters",function(e){e.rules.nonromancharacters="#"+e.params.nonromancharacters,e.messages.nonromancharacters=e.message}),$.validator.addMethod("nonromancharactersif",function(e,a,r){var t=$(a).closest("form"),s=$('input[name="'+r.dependentproperty+'"]',t).val();return FFAPI.methods.stringToBool(s)?!nonRomanCharsRegex.test(e):!0}),$.validator.unobtrusive.adapters.add("nonromancharactersif",["dependentproperty","targetvalue"],function(e){e.rules.nonromancharactersif={dependentproperty:e.params.dependentproperty,targetvalue:e.params.targetvalue},e.messages.nonromancharactersif=e.message}),$.validator.addMethod("requiredif",function(e,a,r){var t="#"+r.dependentproperty,s=$(a).closest("form"),n=r.targetvalue;n=(null==n?"":n).toString();var d=s.find(t),o=d.attr("type"),i=void 0;if("checkbox"===o){var l=d.prop("checked");i=null!=l&&void 0!=l?l:d.attr("checked")}else i=d.val();return"False"===i&&(i=i.toLowerCase()),FFAPI.methods.stringToBool(n)===FFAPI.methods.stringToBool(i)?$.validator.methods.required.call(this,e,a,r):"requiredif-ok"}),$.validator.unobtrusive.adapters.add("requiredif",["dependentproperty","targetvalue"],function(e){e.rules.requiredif={dependentproperty:e.params.dependentproperty,targetvalue:e.params.targetvalue},e.messages.requiredif=e.message}),$.validator.addMethod("enforcetrue",function(e,a,r){return a.checked}),$.validator.unobtrusive.adapters.add("enforcetrue",function(e){e.messages.enforcetrue=e.message,e.rules.enforcetrue=e.params}),$.validator.setDefaults({ignore:"input:hidden:not(.dropdownhidden, .searchableajaxdropdown, .sizeUnavailableValueForValidate, .validateCheckbox),select.dropdown-searchable,select:hidden:not(.dropdownhidden), .no-validate, .js-checkout-editcardtoken-forms:hidden select, #js-checkout-newcreditcard-form:hidden select",highlight:function(e,a,r){if("radio"===e.type)this.findByName(e.name).removeClass(r).addClass(a);else if($(e).hasClass("dropdownhidden")){var t=$(e).attr("name"),s=$(this.currentForm).find("div[data-input-hidden-name='"+t+"']");s.length>0&&s.removeClass(r).addClass(a)}else if($(e).hasClass("searchableajaxdropdown")||$(e).hasClass("dropdown-searchable")){var t=$(e).attr("name"),n=$(this.currentForm).find("span[data-valmsg-for='"+t+"']");if(n.length>0){var s=n.siblings("div.chosen-container");s.length>0&&s.removeClass(r).addClass(a)}}else $(e).removeClass(r).addClass(a)},unhighlight:function(e,a,r){if("radio"===e.type)this.findByName(e.name).removeClass(a).addClass(r);else if($(e).hasClass("dropdownhidden")){var t=$(e).attr("name"),s=$(this.currentForm).find("div[data-input-hidden-name='"+t+"']");s.length>0&&s.removeClass(a).addClass(r)}else if($(e).hasClass("searchableajaxdropdown")||$(e).hasClass("dropdown-searchable")){var t=$(e).attr("name"),n=$(this.currentForm).find("span[data-valmsg-for='"+t+"']");if(n.length>0){var s=n.siblings("div.chosen-container");s.length>0&&s.removeClass(a).addClass(r)}}$(e).data("data-val-required")||""!=$(e).val()?$(e).removeClass(a).addClass(r):$(e).removeClass(a)}}),$.validator.addMethod("zipbyselectedcountry",function(e,a,r){var t="#"+r.dependentproperty;t="#countryList";var s=$(a).closest("form"),n=s.find(t),d=n.attr("type"),o=void 0;if("checkbox"===d){var i=n.prop("checked");o=null!=i&&void 0!=i?i:n.attr("checked")}else o=n.val();if("False"===o&&(o=o.toLowerCase()),void 0==o){var l=document.getElementById("CountryID");o=null!=l?l.value:void 0}var u=/^[^<;!&>]+$/;return"42"==o?u=/^[0-9]{6}$/:"28"==o&&(u=/^[0-9]{5}-[0-9]{3}$/),e.match(u)==e}),$.validator.unobtrusive.adapters.add("zipbyselectedcountry",["dependentproperty","targetvalue"],function(e){e.rules.zipbyselectedcountry={dependentproperty:e.params.dependentproperty,targetvalue:e.params.targetvalue},e.messages.zipbyselectedcountry=e.message})}
$.validator&&($.validator.messages={required:FFAPI.translations.requiredErrorMsg,remote:FFAPI.translations.remoteErrorMsg,email:FFAPI.translations.emailErrorMsg,url:FFAPI.translations.urlErrorMsg,date:FFAPI.translations.dateErrorMsg,dateISO:FFAPI.translations.dateISOErrorMsg,number:FFAPI.translations.numberErrorMsg,digits:FFAPI.translations.digitsErrorMsg,creditcard:FFAPI.translations.creditcardErrorMsg,equalTo:FFAPI.translations.equalToErrorMsg,maxlength:$.validator.format(FFAPI.translations.numCharactersErrorMsg),minlength:$.validator.format(FFAPI.translations.minlengthErrorMsg),rangelength:$.validator.format(FFAPI.translations.rangelengthErrorMsg),range:$.validator.format(FFAPI.translations.rangeErrorMsg),max:$.validator.format(FFAPI.translations.maxErrorMsg),min:$.validator.format(FFAPI.translations.minErrorMsg)});